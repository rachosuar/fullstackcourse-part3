{"ast":null,"code":"var _jsxFileName = \"/Users/juan/Desktop/fullstackcourse/part3/phonebook/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Contacts from \"./components/contacts\";\nimport Filter from \"./components/filter\";\nimport AddContact from \"./components/addcontact\";\nimport phonebook from \"./services/phonebook\";\nimport Notifications from \"./components/notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(true);\n  const [message, setMessage] = useState({\n    data: null,\n    clases: \"\"\n  });\n  useEffect(() => {\n    phonebook.getAll().then(response => {\n      setPersons(response);\n    });\n  }, []);\n\n  const changeName = event => {\n    setNewName(event.target.value);\n  };\n\n  const changeNumber = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = event => {\n    setFilterValue(event.target.value);\n    event.target.value ? setNewFilter(true) : setNewFilter(false);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let newPerson = {\n      name: newName,\n      number: newNumber\n    };\n\n    if (persons.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length > 0 && persons.filter(person => person.number === newNumber).length > 0) {\n      setMessage({\n        data: `${newName} already exist`,\n        clases: \"message\"\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    } else if (persons.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length > 0 && window.confirm(`${newName} already exist do you wish to change the number?`)) {\n      let id = persons.filter(person => newName.toLowerCase() === person.name.toLowerCase())[0].id;\n      phonebook.changePhone(id, newPerson).then(response => {\n        setPersons(persons.map(person => person.id !== id ? person : response));\n      }).catch(err => setMessage({\n        data: `${newName} has already been removed from server`,\n        clases: \"errorMessage\"\n      }));\n      setMessage({\n        data: `${newName} phone number was changed`,\n        clases: \"errorMessage\"\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n\n    if (persons.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length == 0) {\n      phonebook.newPerson(newPerson).then(response => {\n        setPersons([...persons, response]);\n      }).catch(err => {\n        console.log(err.message);\n        setMessage({\n          data: `${err.message}`,\n          clases: \"errorMessage\"\n        });\n      });\n      setMessage({\n        data: `${newName} was added to the phonebook`,\n        clases: \"message\"\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n  };\n\n  const filter = persons.filter(person => person.name.slice(0, filterValue.length).toLowerCase() === filterValue.toLowerCase()); //\n\n  const contactToShow = newFilter ? filter : persons;\n\n  const handleClick = person => {\n    let toDelete = [];\n\n    if (window.confirm(`delete ${person.name}?`)) {\n      toDelete = persons.slice(persons.indexOf(person), persons.indexOf(person) + 1);\n      setPersons(persons.filter(person => person.id !== toDelete[0].id));\n      phonebook.remove(toDelete[0].id);\n    }\n\n    setMessage({\n      data: `${toDelete[0].name} was deleted from phonebook`,\n      clases: \"errorMessage\"\n    });\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), message ? /*#__PURE__*/_jsxDEV(Notifications, {\n      message: message.data,\n      clases: message.clases\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Notifications\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleFilter: handleFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Add a new number\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddContact, {\n      handleSubmit: handleSubmit,\n      changeName: changeName,\n      changeNumber: changeNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Contacts, {\n      persons: contactToShow,\n      handleClick: person => handleClick(person)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"dwyX+6Ipq+PLDGL41nFYvr/p9bk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/juan/Desktop/fullstackcourse/part3/phonebook/src/App.js"],"names":["React","useEffect","useState","Contacts","Filter","AddContact","phonebook","Notifications","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterValue","setFilterValue","newFilter","setNewFilter","message","setMessage","data","clases","getAll","then","response","changeName","event","target","value","changeNumber","handleFilter","handleSubmit","preventDefault","newPerson","name","number","filter","person","toLowerCase","length","setTimeout","window","confirm","id","changePhone","map","catch","err","console","log","slice","contactToShow","handleClick","toDelete","indexOf","remove"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Contacts from \"./components/contacts\";\nimport Filter from \"./components/filter\";\nimport AddContact from \"./components/addcontact\";\nimport phonebook from \"./services/phonebook\";\nimport Notifications from \"./components/notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(true);\n  const [message, setMessage] = useState({ data: null, clases: \"\" });\n\n  useEffect(() => {\n    phonebook.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n\n  const changeName = (event) => {\n    setNewName(event.target.value);\n  };\n  const changeNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilter = (event) => {\n    setFilterValue(event.target.value);\n    event.target.value ? setNewFilter(true) : setNewFilter(false);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    let newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    if (\n      persons.filter(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      ).length > 0 &&\n      persons.filter((person) => person.number === newNumber).length > 0\n    ) {\n      setMessage({ data: `${newName} already exist`, clases: \"message\" });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    } else if (\n      persons.filter(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      ).length > 0 &&\n      window.confirm(\n        `${newName} already exist do you wish to change the number?`\n      )\n    ) {\n      let id = persons.filter(\n        (person) => newName.toLowerCase() === person.name.toLowerCase()\n      )[0].id;\n      phonebook\n        .changePhone(id, newPerson)\n        .then((response) => {\n          setPersons(\n            persons.map((person) => (person.id !== id ? person : response))\n          );\n        })\n        .catch((err) =>\n          setMessage({\n            data: `${newName} has already been removed from server`,\n            clases: \"errorMessage\",\n          })\n        );\n      setMessage({\n        data: `${newName} phone number was changed`,\n        clases: \"errorMessage\",\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n    if (\n      persons.filter(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      ).length == 0\n    ) {\n      phonebook\n        .newPerson(newPerson)\n        .then((response) => {\n          setPersons([...persons, response]);\n        })\n        .catch((err) => {\n          console.log(err.message);\n          setMessage({\n            data: `${err.message}`,\n            clases: \"errorMessage\",\n          });\n        });\n      setMessage({\n        data: `${newName} was added to the phonebook`,\n        clases: \"message\",\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n  };\n\n  const filter = persons.filter(\n    (person) =>\n      person.name.slice(0, filterValue.length).toLowerCase() ===\n      filterValue.toLowerCase()\n  );\n  //\n\n  const contactToShow = newFilter ? filter : persons;\n\n  const handleClick = (person) => {\n    let toDelete = [];\n    if (window.confirm(`delete ${person.name}?`)) {\n      toDelete = persons.slice(\n        persons.indexOf(person),\n        persons.indexOf(person) + 1\n      );\n      setPersons(persons.filter((person) => person.id !== toDelete[0].id));\n      phonebook.remove(toDelete[0].id);\n    }\n    setMessage({\n      data: `${toDelete[0].name} was deleted from phonebook`,\n      clases: \"errorMessage\",\n    });\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {message ? (\n        <Notifications message={message.data} clases={message.clases} />\n      ) : (\n        <h2>Notifications</h2>\n      )}\n      <Filter handleFilter={handleFilter} />\n      <h1>Add a new number</h1>\n      <AddContact\n        handleSubmit={handleSubmit}\n        changeName={changeName}\n        changeNumber={changeNumber}\n      />\n      {\n        <Contacts\n          persons={contactToShow}\n          handleClick={(person) => handleClick(person)}\n        />\n      }\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}